---
// 小说章节布局 V1.0
import '../styles/global.css';
const { frontmatter } = Astro.props;

// 简单的逻辑来推断上一章和下一章的链接
const chapterNumber = parseInt(Astro.url.pathname.split('/').pop() || '1', 10);
const prevChapterLink = chapterNumber > 1 ? `/novel/entropy-clock/${chapterNumber - 1}` : null;
const nextChapterLink = `/novel/entropy-clock/${chapterNumber + 1}`; // 假设总有下一章
---
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>《熵减时钟》 - {frontmatter.title}</title>
</head>
<body class="reading-view">
    <main class="reading-container">
        <header class="reading-header">
            <p class="text-purple-300 font-sans text-sm">《熵减时钟》</p>
            <h1>{frontmatter.title}</h1>
        </header>
        <article class="prose">
            <slot />
        </article>
        
        <!-- 上下章导航 -->
        <nav class="chapter-nav">
            {prevChapterLink && (
                <a href={prevChapterLink} class="nav-link prev">
                    &larr; 上一章
                </a>
            )}
            <a href="/novel/entropy-clock" class="nav-link toc">
                返回目录
            </a>
            <a href={nextChapterLink} class="nav-link next">
                下一章 &rarr;
            </a>
        </nav>
    </main>
    <a href="/" class="return-link">&larr; 返回书库首页</a>
</body>
</html>
<style>
/* 为阅读页面定制的body样式 */
:global(body.reading-view) {
    background-color: #111115;
    color: #ccc;
    padding: 2rem 1rem;
    overflow-y: auto;
    font-family: 'Noto Serif SC', serif;
}
.reading-container { max-width: 800px; margin: 0 auto; opacity: 0; animation: fadeIn 1s ease forwards; }
.reading-header { text-align: center; margin-bottom: 3rem; }
.reading-header h1 { font-size: 2.5rem; color: #fff; margin: 0.5rem 0; font-family: 'Noto Serif SC', serif; }
.prose { font-size: 1.1rem; line-height: 1.9; text-align: justify; }
.prose :global(p) { margin-bottom: 1.5em; }
.prose :global(blockquote) { border-left: 3px solid #a988d5; padding-left: 1.5rem; margin-left: 0; color: #aaa; font-style: italic; }
.return-link { position: fixed; top: 20px; left: 20px; color: #888; background: rgba(0,0,0,0.3); padding: 8px 12px; border-radius: 5px; text-decoration: none; transition: all 0.3s ease; z-index: 1000; font-family: 'Inter', sans-serif; }
.return-link:hover { color: #fff; background: #6c8eef; }

/* 上下章导航样式 */
.chapter-nav {
    display: flex;
    justify-content: space-between;
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid #333;
}
.nav-link {
    font-family: 'Inter', sans-serif;
    color: #888;
    text-decoration: none;
    padding: 10px 20px;
    border: 1px solid #444;
    border-radius: 5px;
    transition: all 0.3s ease;
}
.nav-link:hover {
    color: #fff;
    background-color: #6c8eef;
    border-color: #6c8eef;
}
.nav-link.toc {
    border-color: transparent;
    background: none;
}
.nav-link.toc:hover {
    background: rgba(255,255,255,0.1);
}

@keyframes fadeIn { to { opacity: 1; } }
</style>